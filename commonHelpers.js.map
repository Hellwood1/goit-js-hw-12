{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["\"use strict\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/?';\n\nconst API_KEY = '41881692-6f4b64110761e7ecb64cd986a';\n\nconst form = document.querySelector('.form');\nconst myGallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst searchParamsDefault = {\n  key: API_KEY,\n  q: 'query',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n\nconst showLoader = state => {\n  loader.style.display = state ? 'block' : 'none';\n};\n\nconst handleFormSubmit = event => {\n  event.preventDefault();\n  const searchQuery = event.target.elements.search.value.trim();\n  if (!searchQuery) {\n    console.error('Please enter a valid search query.');\n    return;\n  }\n  \nclearPreviousResults();\n    \n  showLoader(true);\n  searchParamsDefault.q = encodeURIComponent(searchQuery);\n  \n  const searchParams = new URLSearchParams(searchParamsDefault);\n  const url = `${BASE_URL}${searchParams}`;  \n  getImages(url);\n  event.currentTarget.reset();\n};\n\nconst getImages = url => {\n  showLoader(true);\n  \n  fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`Something went wrong. Please try again later.`);\n      }\n      return response.json();\n    })\n    .then(({ hits }) => {\n      if (hits.length === 0) {\n        showNoImagesMessage();\n      } else {\n        renderImages(hits);\n        lightbox.refresh();\n      }\n    })\n    .catch(error => {\n      console.error(error.message);\n    })\n    .finally(() => {\n      showLoader(false);\n    });\n\n    \n};\n\nconst showNoImagesMessage = () => {\n    iziToast.error({\n     message: `Sorry, there are no images matching your search query. Please try again!`,\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n      maxWidth: 300,\n      timeout: 2000,\n      progressBar: false,\n      position: 'topRight',\n      transitionIn: 'bounceInRight',\n      transitionOut: 'fadeOutLeft',\n      messageSize: 12,\n    });\n};\n\nconst renderImages = hits => {\n  myGallery.innerHTML = hits.map(image =>   `\n    <li class='gallery-item'>\n        <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class='info-container'>\n          <div>\n            <h3 class='card-title'>Likes</h3>\n            <p class='card-info'>${image.likes}</p>\n          </div>\n          <div>\n            <h3 class='card-title'>Views</h3>\n            <p class='card-info'>${image.views}</p>\n          </div>\n          <div>\n            <h3 class='card-title'>Comments</h3>\n            <p class='card-info'>${image.comments}</p>\n          </div>\n          <div>\n            <h3 class='card-title'>Downloads</h3>\n            <p class='card-info'>${image.downloads}</p>\n          </div>\n        </div>\n      </li>`).join('');\n};\n\nconst clearPreviousResults = () => {\n  myGallery.innerHTML = '';\n};\n\nform.addEventListener('submit', handleFormSubmit);"],"names":["BASE_URL","API_KEY","form","myGallery","loader","searchParamsDefault","lightbox","SimpleLightbox","showLoader","state","handleFormSubmit","event","searchQuery","clearPreviousResults","searchParams","url","getImages","response","hits","showNoImagesMessage","renderImages","error","iziToast","image"],"mappings":"6vBAOA,MAAMA,EAAW,4BAEXC,EAAU,qCAEVC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAsB,CAC1B,IAAKJ,EACL,EAAG,QACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEMK,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACZ,CAAC,EAEKC,EAAaC,GAAS,CAC1BL,EAAO,MAAM,QAAUK,EAAQ,QAAU,MAC3C,EAEMC,EAAmBC,GAAS,CAChCA,EAAM,eAAc,EACpB,MAAMC,EAAcD,EAAM,OAAO,SAAS,OAAO,MAAM,OACvD,GAAI,CAACC,EAAa,CAChB,QAAQ,MAAM,oCAAoC,EAClD,MACD,CAEHC,IAEEL,EAAW,EAAI,EACfH,EAAoB,EAAI,mBAAmBO,CAAW,EAEtD,MAAME,EAAe,IAAI,gBAAgBT,CAAmB,EACtDU,EAAM,GAAGf,IAAWc,IAC1BE,EAAUD,CAAG,EACbJ,EAAM,cAAc,OACtB,EAEMK,EAAYD,GAAO,CACvBP,EAAW,EAAI,EAEf,MAAMO,CAAG,EACN,KAAKE,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,+CAA+C,EAEjE,OAAOA,EAAS,MACtB,CAAK,EACA,KAAK,CAAC,CAAE,KAAAC,KAAW,CACdA,EAAK,SAAW,EAClBC,KAEAC,EAAaF,CAAI,EACjBZ,EAAS,QAAO,EAExB,CAAK,EACA,MAAMe,GAAS,CACd,QAAQ,MAAMA,EAAM,OAAO,CACjC,CAAK,EACA,QAAQ,IAAM,CACbb,EAAW,EAAK,CACtB,CAAK,CAGL,EAEMW,EAAsB,IAAM,CAC9BG,EAAS,MAAM,CACd,QAAS,2EACR,gBAAiB,UACjB,aAAc,UACd,SAAU,IACV,QAAS,IACT,YAAa,GACb,SAAU,WACV,aAAc,gBACd,cAAe,cACf,YAAa,EACnB,CAAK,CACL,EAEMF,EAAeF,GAAQ,CAC3Bf,EAAU,UAAYe,EAAK,IAAIK,GAAW;AAAA;AAAA,mBAEzBA,EAAM;AAAA,oBACLA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKnBA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAINA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAINA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAINA,EAAM;AAAA;AAAA;AAAA,YAG7B,EAAE,KAAK,EAAE,CACrB,EAEMV,EAAuB,IAAM,CACjCV,EAAU,UAAY,EACxB,EAEAD,EAAK,iBAAiB,SAAUQ,CAAgB"}