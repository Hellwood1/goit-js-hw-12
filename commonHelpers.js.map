{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["\"use strict\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst API_KEY = '41881692-6f4b64110761e7ecb64cd986a';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n\nconst handleFormSubmit = async (event) => {\n  event.preventDefault();\n\n  const form = document.querySelector('.form');\n  const myGallery = document.querySelector('.gallery');\n  const loader = document.querySelector('.loader');\n\n  const searchParamsDefault = {\n    key: API_KEY,\n    q: 'query',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  const searchQuery = event.target.elements.search.value.trim();\n  if (!searchQuery) {\n    showNoImagesMessage('Please enter a valid search query!');\n    return;\n  }\n\n  const searchParams = { ...searchParamsDefault, q: encodeURIComponent(searchQuery) };\n\n  clearPreviousResults();\n  showLoader(true);\n\n  const url = `${BASE_URL}${new URLSearchParams(searchParams)}`;\n\n  try {\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error(`Something went wrong. Please try again later.`);\n    }\n\n    const { hits } = await response.json();\n\n    if (hits.length === 0) {\n      showNoImagesMessage('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n      renderImages(hits);\n      lightbox.refresh();\n    }\n  } catch (error) {\n    console.error(error.message);\n  } finally {\n    showLoader(false);\n    form.reset();\n  }\n};\n\nconst showNoImagesMessage = (message) => {\n  iziToast.error({\n    message: message,\n    backgroundColor: '#EF4040',\n    messageColor: '#FFFFFF',\n    maxWidth: 300,\n    timeout: 2000,\n    progressBar: false,\n    position: 'topRight',\n    transitionIn: 'bounceInRight',\n    transitionOut: 'fadeOutLeft',\n    messageSize: 12,\n  });\n};\n\nconst renderImages = (hits) => {\n  const myGallery = document.querySelector('.gallery');\n\n  myGallery.innerHTML = hits.map((image) => `\n    <li class='gallery-item'>\n        <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class='info-container'>\n          <div>\n            <h3 class='card-title'>Likes</h3>\n            <p class='card-info'>${image.likes}</p>\n          </div>\n          <div>\n            <h3 class='card-title'>Views</h3>\n            <p class='card-info'>${image.views}</p>\n          </div>\n          <div>\n            <h3 class='card-title'>Comments</h3>\n            <p class='card-info'>${image.comments}</p>\n          </div>\n          <div>\n            <h3 class='card-title'>Downloads</h3>\n            <p class='card-info'>${image.downloads}</p>\n          </div>\n        </div>\n      </li>`).join('');\n};\n\nconst clearPreviousResults = () => {\n  const myGallery = document.querySelector('.gallery');\n  myGallery.innerHTML = '';\n};\n\nconst showLoader = (state) => {\n  const loader = document.querySelector('.loader');\n  loader.style.display = state ? 'block' : 'none';\n};\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', handleFormSubmit);"],"names":["BASE_URL","API_KEY","lightbox","SimpleLightbox","handleFormSubmit","event","form","searchParamsDefault","searchQuery","showNoImagesMessage","searchParams","clearPreviousResults","showLoader","url","response","hits","renderImages","error","message","iziToast","myGallery","image","state","loader"],"mappings":"6vBAOA,MAAMA,EAAW,4BACXC,EAAU,qCAEVC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACZ,CAAC,EAEKC,EAAmB,MAAOC,GAAU,CACxCA,EAAM,eAAc,EAEpB,MAAMC,EAAO,SAAS,cAAc,OAAO,EACzB,SAAS,cAAc,UAAU,EACpC,SAAS,cAAc,SAAS,EAE/C,MAAMC,EAAsB,CAC1B,IAAKN,EACL,EAAG,QACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEQO,EAAcH,EAAM,OAAO,SAAS,OAAO,MAAM,OACvD,GAAI,CAACG,EAAa,CAChBC,EAAoB,oCAAoC,EACxD,MACD,CAED,MAAMC,EAAe,CAAE,GAAGH,EAAqB,EAAG,mBAAmBC,CAAW,GAEhFG,IACAC,EAAW,EAAI,EAEf,MAAMC,EAAM,GAAGb,IAAW,IAAI,gBAAgBU,CAAY,IAE1D,GAAI,CACF,MAAMI,EAAW,MAAM,MAAMD,CAAG,EAEhC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,+CAA+C,EAGjE,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMD,EAAS,KAAI,EAEhCC,EAAK,SAAW,EAClBN,EAAoB,0EAA0E,GAE9FO,EAAaD,CAAI,EACjBb,EAAS,QAAO,EAEnB,OAAQe,EAAP,CACA,QAAQ,MAAMA,EAAM,OAAO,CAC/B,QAAY,CACRL,EAAW,EAAK,EAChBN,EAAK,MAAK,CACX,CACH,EAEMG,EAAuBS,GAAY,CACvCC,EAAS,MAAM,CACb,QAASD,EACT,gBAAiB,UACjB,aAAc,UACd,SAAU,IACV,QAAS,IACT,YAAa,GACb,SAAU,WACV,aAAc,gBACd,cAAe,cACf,YAAa,EACjB,CAAG,CACH,EAEMF,EAAgBD,GAAS,CAC7B,MAAMK,EAAY,SAAS,cAAc,UAAU,EAEnDA,EAAU,UAAYL,EAAK,IAAKM,GAAU;AAAA;AAAA,mBAEzBA,EAAM;AAAA,oBACLA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKnBA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAINA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAINA,EAAM;AAAA;AAAA;AAAA;AAAA,mCAINA,EAAM;AAAA;AAAA;AAAA,YAG7B,EAAE,KAAK,EAAE,CACrB,EAEMV,EAAuB,IAAM,CACjC,MAAMS,EAAY,SAAS,cAAc,UAAU,EACnDA,EAAU,UAAY,EACxB,EAEMR,EAAcU,GAAU,CAC5B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAUD,EAAQ,QAAU,MAC3C,EAEMhB,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUF,CAAgB"}